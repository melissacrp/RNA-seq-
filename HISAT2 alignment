conda install -c bioconda hisat2
conda install -c bioconda agat #to convert gff to gtf 



agat_convert_sp_gff2gtf.pl -gff Musa_acuminata_pahang_v4.gff3 -o Musa_acuminata_pahang_v4.gtf #to convert from gff3 to gtf

sed 's/$/;/' Musa_acuminata_pahang_v4.gtf > edit-Musa_acuminata_pahang_v4.gtf #to finish the line with ; in order for hisat2_extract to function
sed 's/ID=/transcript_id /;s/Parent=/gene_id /' edit-Musa_acuminata_pahang_v4.gtf > final-Musa_acuminata_pahang_v4.gtf #changing id and parent in order to function in hisat2_extract

hisat2_extract_splice_sites.py final-Musa_acuminata_pahang_v4.gtf >musa.ss
hisat2_extract_exons.py final-Musa_acuminata_pahang_v4.gtf >musa.exon
hisat2-build --ss musa.ss --exon musa.exon Musa_acuminata_pahang_v4.fa banana-index

hisat2 --dta -x /Users/melissa/Desktop/filtered/index/banana-index -U out-filt-Tuu_Gia_Ctrl_6_12_hpi_S7_R1_001.fastq -S Tuu_Gia_Ctrl_6_12_hpi_S7_R1_001.sam

hisat2_extract_splice_sites.py Musa_acuminata_pahang_v4.gtf > splicesites.tsv
hisat2_extract_exons.py Musa_acuminata_pahang_v4.gtf > exons.tsv
hisat2-build -p 8 --ss splicesites.tsv --exon exons.tsv Musa_acuminata_pahang_v4.fasta banana-index

hisat2 --dta -x /home/melissarp_mr/hisat/index/banana-index -U out-filt-Tuu_Gia_Ctrl_6_12_hpi_S7_R1_001.fastq -S Tuu_Gia_Ctrl_6_12_hpi_S7_R1_001.sam


ls
